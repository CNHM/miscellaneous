-- è‡ªå®šä¹‰ Roblox UI åº“ (HM-UI)
-- åŠŸèƒ½ï¼šæ”¯æŒçª—å£ã€é€‰é¡¹å¡ã€æŒ‰é’®ã€å¼€å…³ã€æ»‘å—ã€è¾“å…¥æ¡†ï¼Œå¸¦æœ€å°åŒ–/å…³é—­æŒ‰é’®ã€æ‹–æ‹½ï¼ˆæœ‰é™åˆ¶ï¼‰ã€å¤§å°è°ƒæ•´ã€é”å®š/è§£é”åŠŸèƒ½åŠæ»šåŠ¨æ¡
-- ä½œè€…ï¼šGrokï¼ˆåŸºäº xAI æä¾›ï¼‰
-- ç‰ˆæœ¬ï¼š5.0
-- æ—¥æœŸï¼š2025-09-27
-- è¯´æ˜ï¼šé‡åšæŒ‰é’®åŠŸèƒ½ï¼Œä¼˜åŒ–ç§»åŠ¨ç«¯å…¼å®¹æ€§ï¼Œç¡®ä¿æŒ‰é’®æ˜¾ç¤ºï¼Œæœªæ¥æ‰©å±•æ³¨æ„æ‰‹æœºé€‚é…

local CustomUILibrary = {}

-- æœåŠ¡å¼•ç”¨
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- å·¥å…·å‡½æ•°ï¼šåˆ›å»ºåœ†è§’
local function applyCorner(instance, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius or 8)
    corner.Parent = instance
end

-- é€šçŸ¥æ–¹æ³•ï¼ˆå…¨å±€å®šä¹‰ï¼‰
function CustomUILibrary:Notify(notifyConfig)
    local window = self
    if not window or not window.screenGui then return end

    local notifyFrame = Instance.new("Frame")
    notifyFrame.Size = UDim2.new(0, 250, 0, 80)
    notifyFrame.Position = UDim2.new(1, -260, 1, -90)
    notifyFrame.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(20, 20, 20) or Color3.fromRGB(220, 220, 220)
    notifyFrame.BackgroundTransparency = 0.2
    applyCorner(notifyFrame, 8)
    notifyFrame.Parent = window.screenGui

    local notifyTitle = Instance.new("TextLabel")
    notifyTitle.Size = UDim2.new(1, -10, 0, 25)
    notifyTitle.Position = UDim2.new(0, 5, 0, 5)
    notifyTitle.Text = notifyConfig.Title or "é€šçŸ¥"
    notifyTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    notifyTitle.BackgroundTransparency = 1
    notifyTitle.TextSize = 14 -- è°ƒæ•´ä¸ºç§»åŠ¨ç«¯å‹å¥½å°ºå¯¸
    notifyTitle.Font = Enum.Font.GothamBold
    notifyTitle.Parent = notifyFrame

    local notifyContent = Instance.new("TextLabel")
    notifyContent.Size = UDim2.new(1, -10, 0, 45)
    notifyContent.Position = UDim2.new(0, 5, 0, 30)
    notifyContent.Text = notifyConfig.Content or ""
    notifyContent.TextColor3 = Color3.fromRGB(200, 200, 200)
    notifyContent.BackgroundTransparency = 1
    notifyContent.TextSize = 12
    notifyContent.Font = Enum.Font.Gotham
    notifyContent.TextWrapped = true
    notifyContent.Parent = notifyFrame

    -- é€šçŸ¥åŠ¨ç”»
    notifyFrame.Position = UDim2.new(1, 0, 1, -90)
    local tweenIn = TweenService:Create(notifyFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quad), {Position = UDim2.new(1, -260, 1, -90)})
    tweenIn:Play()
    wait(notifyConfig.Duration or 3)
    local tweenOut = TweenService:Create(notifyFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quad), {Position = UDim2.new(1, 0, 1, -90)})
    tweenOut:Play()
    tweenOut.Completed:Connect(function()
        notifyFrame:Destroy()
    end)
end

-- ä¸» UI åº“ï¼šåˆ›å»ºçª—å£
function CustomUILibrary:CreateWindow(config)
    local window = {}
    window.Title = config.Title or "HM-UI ç•Œé¢"
    window.SubTitle = config.SubTitle or "Created by Grok (xAI) - https://x.ai"
    window.Size = config.Size or UDim2.fromOffset(600, 400) -- é»˜è®¤å¤§å°ï¼Œç§»åŠ¨ç«¯å¯è°ƒæ•´
    window.Theme = config.Theme or "Dark"
    window.IsMinimized = false
    window.IsLocked = false
    window.MinSize = UDim2.new(0, 300, 0, 200)  -- æœ€å°å°ºå¯¸ï¼Œé€‚åˆç§»åŠ¨ç«¯

    -- åˆ›å»ºä¸» ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "HMUILibrary"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    screenGui.ResetOnSpawn = false
    window.screenGui = screenGui

    -- ä¸»çª—å£æ¡†æ¶
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = window.Size
    mainFrame.Position = UDim2.new(0.5, -window.Size.X.Offset / 2, 0.5, -window.Size.Y.Offset / 2) -- å±…ä¸­
    mainFrame.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(20, 20, 20) or Color3.fromRGB(220, 220, 220)
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.ClipsDescendants = true
    applyCorner(mainFrame, 12)
    mainFrame.Parent = screenGui

    -- æ ‡é¢˜æ 
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 60)
    titleBar.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(15, 15, 15) or Color3.fromRGB(200, 200, 200)
    titleBar.BackgroundTransparency = 0.2
    applyCorner(titleBar, 8)
    titleBar.Parent = mainFrame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -10, 0, 30)
    titleLabel.Position = UDim2.new(0, 10, 0, 5)
    titleLabel.Text = window.Title
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextSize = 16
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = titleBar

    local subTitleLabel = Instance.new("TextLabel")
    subTitleLabel.Size = UDim2.new(1, -10, 0, 20)
    subTitleLabel.Position = UDim2.new(0, 10, 0, 35)
    subTitleLabel.Text = window.SubTitle
    subTitleLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    subTitleLabel.BackgroundTransparency = 1
    subTitleLabel.TextSize = 12
    subTitleLabel.Font = Enum.Font.Gotham
    subTitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    subTitleLabel.Parent = titleBar

    -- çª—å£æ‹–æ‹½åŠŸèƒ½ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
    local draggingConnection = nil
    local dragging = false
    local dragStart = nil
    local startPos = nil
    local screenSize = workspace.CurrentCamera.ViewportSize

    titleBar.InputBegan:Connect(function(input)
        local inputType = input.UserInputType
        if (inputType == Enum.UserInputType.MouseButton1 or inputType == Enum.UserInputType.Touch) and not window.IsLocked then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            draggingConnection = UserInputService.TouchEnded:Connect(function()
                dragging = false
                if draggingConnection then
                    draggingConnection:Disconnect()
                    draggingConnection = nil
                end
            end)
        end
    end)

    titleBar.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            local newX = math.max(0, math.min(startPos.X.Offset + delta.X, screenSize.X - mainFrame.Size.X.Offset))
            local newY = math.max(0, math.min(startPos.Y.Offset + delta.Y, screenSize.Y - mainFrame.Size.Y.Offset))
            mainFrame.Position = UDim2.new(0, newX, 0, newY)
        end
    end)

    -- å…³é—­æŒ‰é’®
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -40, 0.5, -15)
    closeButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    closeButton.BackgroundTransparency = 0.2
    closeButton.Text = "Ã—"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.TextSize = 18
    closeButton.Font = Enum.Font.GothamBold
    applyCorner(closeButton, 15)
    closeButton.Parent = titleBar

    closeButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            local initialSize = mainFrame.Size
            local initialPosition = mainFrame.Position
            local centerX = initialPosition.X.Offset + initialSize.X.Offset / 2
            local centerY = initialPosition.Y.Offset + initialSize.Y.Offset / 2
            TweenService:Create(closeButton, TweenInfo.new(0.1, Enum.EasingStyle.Sine), {BackgroundColor3 = Color3.fromRGB(255, 50, 50)}):Play()
            TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                Size = UDim2.new(0, 0, 0, 0),
                Position = UDim2.new(0, centerX, 0, centerY)
            }):Play()
            TweenService:Create(closeButton, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {BackgroundColor3 = Color3.fromRGB(200, 0, 0)}):Play()
            wait(0.3)
            screenGui:Destroy()
        end
    end)

    -- å¤§å°è°ƒæ•´æŠŠæ‰‹ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
    local resizeHandle = Instance.new("Frame")
    resizeHandle.Size = UDim2.new(0, 40, 0, 40) -- å¢å¤§å°ºå¯¸ä¾¿äºè§¦æ‘¸
    resizeHandle.Position = UDim2.new(1, -40, 1, -40)
    resizeHandle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    resizeHandle.BackgroundTransparency = 0.5
    applyCorner(resizeHandle, 4)
    local resizeLine1 = Instance.new("Frame")
    resizeLine1.Size = UDim2.new(0, 20, 0, 2)
    resizeLine1.Position = UDim2.new(0, 10, 0, 10)
    resizeLine1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    resizeLine1.Rotation = 45
    resizeLine1.Parent = resizeHandle
    local resizeLine2 = Instance.new("Frame")
    resizeLine2.Size = UDim2.new(0, 20, 0, 2)
    resizeLine2.Position = UDim2.new(0, 10, 0, 20)
    resizeLine2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    resizeLine2.Rotation = 45
    resizeLine2.Parent = resizeHandle
    resizeHandle.Parent = mainFrame

    local resizingConnection = nil
    local resizing = false
    local resizeStart = nil
    local startSize = nil
    local startPos = nil

    resizeHandle.InputBegan:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not window.IsLocked then
            resizing = true
            resizeStart = input.Position
            startSize = mainFrame.Size
            startPos = mainFrame.Position
            resizingConnection = UserInputService.TouchEnded:Connect(function()
                resizing = false
                if resizingConnection then
                    resizingConnection:Disconnect()
                    resizingConnection = nil
                end
            end)
        end
    end)

    resizeHandle.InputChanged:Connect(function(input)
        if resizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - resizeStart
            local newWidth = math.max(window.MinSize.X.Offset, startSize.X.Offset + delta.X)
            local newHeight = math.max(window.MinSize.Y.Offset, startSize.Y.Offset + delta.Y)
            mainFrame.Size = UDim2.new(0, newWidth, 0, newHeight)
            tabContainer.Size = UDim2.new(0, math.min(160, newWidth * 0.25), 1, -60)
            contentFrame.Size = UDim2.new(1, -tabContainer.AbsoluteSize.X, 1, -60)
        end
    end)

    -- é€‰é¡¹å¡å®¹å™¨ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
    local tabContainer = Instance.new("ScrollingFrame")
    tabContainer.Size = UDim2.new(0, 160, 1, -60)
    tabContainer.Position = UDim2.new(0, 0, 0, 60)
    tabContainer.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(25, 25, 25) or Color3.fromRGB(210, 210, 210)
    tabContainer.BackgroundTransparency = 0.3
    tabContainer.ScrollBarThickness = 8 -- å¢å¤§ä¾¿äºè§¦æ‘¸
    tabContainer.ScrollBarImageColor3 = window.Theme == "Dark" and Color3.fromRGB(100, 100, 100) or Color3.fromRGB(150, 150, 150)
    tabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
    applyCorner(tabContainer, 8)
    tabContainer.Parent = mainFrame

    local tabListLayout = Instance.new("UIListLayout")
    tabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabListLayout.Padding = UDim.new(0, 5)
    tabListLayout.Parent = tabContainer

    local tabPadding = Instance.new("UIPadding")
    tabPadding.PaddingTop = UDim.new(0, 5)
    tabPadding.PaddingBottom = UDim.new(0, 5)
    tabPadding.Parent = tabContainer

    -- å†…å®¹åŒºåŸŸï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
    local contentFrame = Instance.new("ScrollingFrame")
    contentFrame.Size = UDim2.new(1, -160, 1, -60)
    contentFrame.Position = UDim2.new(0, 160, 0, 60)
    contentFrame.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(30, 30, 30) or Color3.fromRGB(230, 230, 230)
    contentFrame.BackgroundTransparency = 0.3
    contentFrame.ScrollBarThickness = 8 -- å¢å¤§ä¾¿äºè§¦æ‘¸
    contentFrame.ScrollBarImageColor3 = window.Theme == "Dark" and Color3.fromRGB(100, 100, 100) or Color3.fromRGB(150, 150, 150)
    contentFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    applyCorner(contentFrame, 8)
    contentFrame.Parent = mainFrame

    local contentListLayout = Instance.new("UIListLayout")
    contentListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    contentListLayout.Padding = UDim.new(0, 10) -- å¢å¤§é—´è·ä¾¿äºè§¦æ‘¸
    contentListLayout.Parent = contentFrame

    local contentPadding = Instance.new("UIPadding")
    contentPadding.PaddingTop = UDim.new(0, 5)
    contentPadding.PaddingBottom = UDim.new(0, 5)
    contentPadding.Parent = contentFrame

    -- åŠ¨æ€æ›´æ–° CanvasSize
    tabContainer.ChildAdded:Connect(function(child)
        tabContainer.CanvasSize = UDim2.new(0, 0, 0, tabListLayout.AbsoluteContentSize.Y + 10)
    end)

    contentFrame.ChildAdded:Connect(function(child)
        contentFrame.CanvasSize = UDim2.new(0, 0, 0, contentListLayout.AbsoluteContentSize.Y + 10)
    end)

    -- å­˜å‚¨é€‰é¡¹å¡
    window.Tabs = {}
    window.CurrentTab = nil

    -- å¯æ‹–åŠ¨æœ€å°åŒ–æŒ‰é’®ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
    local minimizeButton = Instance.new("TextButton")
    minimizeButton.Size = UDim2.new(0, 50, 0, 50) -- å¢å¤§å°ºå¯¸
    minimizeButton.Position = UDim2.new(0, 20, 0, 20)
    minimizeButton.BackgroundColor3 = Color3.fromRGB(200, 200, 0)
    minimizeButton.BackgroundTransparency = 0.2
    minimizeButton.Text = "-"
    minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    minimizeButton.TextSize = 24 -- å¢å¤§æ–‡å­—
    minimizeButton.Font = Enum.Font.GothamBold
    applyCorner(minimizeButton, 25)
    minimizeButton.Parent = screenGui
    minimizeButton.Visible = true

    local minDragging = false
    local minDragStart = nil
    local minStartPos = nil

    minimizeButton.InputBegan:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
            minDragging = true
            minDragStart = input.Position
            minStartPos = minimizeButton.Position
            local dragConnection = UserInputService.TouchEnded:Connect(function()
                minDragging = false
                if dragConnection then
                    dragConnection:Disconnect()
                    dragConnection = nil
                end
            end)
        end
    end)

    minimizeButton.InputChanged:Connect(function(input)
        if minDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - minDragStart
            local newX = math.max(0, minStartPos.X.Offset + delta.X)
            local newY = math.max(0, minStartPos.Y.Offset + delta.Y)
            minimizeButton.Position = UDim2.new(0, newX, 0, newY)
        end
    end)

    minimizeButton.MouseButton1Click:Connect(function()
        if not window.IsMinimized then
            mainFrame.Visible = false
            minimizeButton.Text = "+"
            window.IsMinimized = true
            TweenService:Create(minimizeButton, TweenInfo.new(0.3, Enum.EasingStyle.Sine), {BackgroundColor3 = Color3.fromRGB(150, 150, 0)}):Play()
        else
            mainFrame.Visible = true
            minimizeButton.Text = "-"
            window.IsMinimized = false
            TweenService:Create(minimizeButton, TweenInfo.new(0.3, Enum.EasingStyle.Sine), {BackgroundColor3 = Color3.fromRGB(200, 200, 0)}):Play()
        end
    end)

    -- å¯æ‹–åŠ¨é”å®š/è§£é”æŒ‰é’®ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
    local lockButton = Instance.new("TextButton")
    lockButton.Size = UDim2.new(0, 50, 0, 50) -- å¢å¤§å°ºå¯¸
    lockButton.Position = UDim2.new(0, 80, 0, 20)
    lockButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    lockButton.BackgroundTransparency = 0.2
    lockButton.Text = "ğŸ”“"
    lockButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    lockButton.TextSize = 24 -- å¢å¤§æ–‡å­—
    lockButton.Font = Enum.Font.GothamBold
    applyCorner(lockButton, 25)
    lockButton.Parent = screenGui
    lockButton.Visible = true

    local lockDragging = false
    local lockDragStart = nil
    local lockStartPos = nil

    lockButton.InputBegan:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
            lockDragging = true
            lockDragStart = input.Position
            lockStartPos = lockButton.Position
            local dragConnection = UserInputService.TouchEnded:Connect(function()
                lockDragging = false
                if dragConnection then
                    dragConnection:Disconnect()
                    dragConnection = nil
                end
            end)
        end
    end)

    lockButton.InputChanged:Connect(function(input)
        if lockDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - lockDragStart
            local newX = math.max(0, lockStartPos.X.Offset + delta.X)
            local newY = math.max(0, lockStartPos.Y.Offset + delta.Y)
            lockButton.Position = UDim2.new(0, newX, 0, newY)
        end
    end)

    lockButton.MouseButton1Click:Connect(function()
        window.IsLocked = not window.IsLocked
        if window.IsLocked then
            lockButton.Text = "ğŸ”’"
            lockButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
            TweenService:Create(lockButton, TweenInfo.new(0.3, Enum.EasingStyle.Sine), {BackgroundColor3 = Color3.fromRGB(200, 0, 0)}):Play()
            if draggingConnection then draggingConnection:Disconnect() end
            if resizingConnection then resizingConnection:Disconnect() end
        else
            lockButton.Text = "ğŸ”“"
            lockButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
            TweenService:Create(lockButton, TweenInfo.new(0.3, Enum.EasingStyle.Sine), {BackgroundColor3 = Color3.fromRGB(0, 200, 0)}):Play()
        end
    end)

    -- åˆ›å»ºé€‰é¡¹å¡æ–¹æ³•
    function window:Tab(tabConfig)
        local tab = {}
        tab.Title = tabConfig.Title or "é€‰é¡¹å¡"
        tab.Icon = tabConfig.Icon or ""
        tab.Locked = tabConfig.Locked or false
        tab.Default = tabConfig.Default or false

        local tabButton = Instance.new("TextButton")
        tabButton.Size = UDim2.new(1, -10, 0, 50) -- å¢å¤§å°ºå¯¸ä¾¿äºè§¦æ‘¸
        tabButton.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(40, 40, 40) or Color3.fromRGB(180, 180, 180)
        tabButton.BackgroundTransparency = 0.4
        tabButton.Text = tab.Icon ~= "" and tab.Icon .. " " .. tab.Title or tab.Title
        tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabButton.TextSize = 14
        tabButton.Font = Enum.Font.Gotham
        applyCorner(tabButton, 6)
        tabButton.Parent = tabContainer

        local tabContent = Instance.new("Frame")
        tabContent.Size = UDim2.new(1, -20, 0, 0) -- åŠ¨æ€å¤§å°
        tabContent.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(40, 40, 40) or Color3.fromRGB(200, 200, 200)
        tabContent.BackgroundTransparency = 0.2
        tabContent.Visible = tab.Default
        applyCorner(tabContent, 8)
        tabContent.Parent = contentFrame

        local contentListLayout = Instance.new("UIListLayout")
        contentListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        contentListLayout.Padding = UDim.new(0, 10) -- å¢å¤§é—´è·
        contentListLayout.Parent = tabContent

        tabButton.MouseButton1Click:Connect(function()
            if tab.Locked then
                self:Notify({
                    Title = "é”™è¯¯",
                    Content = "æ­¤é€‰é¡¹å¡å·²é”å®šï¼",
                    Duration = 3
                })
                return
            end
            for _, otherTab in pairs(window.Tabs) do
                otherTab.Content.Visible = false
                TweenService:Create(otherTab.Button, TweenInfo.new(0.3), {BackgroundTransparency = 0.4}):Play()
            end
            tabContent.Visible = true
            TweenService:Create(tabButton, TweenInfo.new(0.3, Enum.EasingStyle.Sine), {BackgroundTransparency = 0.2}):Play()
            TweenService:Create(tabContent, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {BackgroundTransparency = 0}):Play()
            window.CurrentTab = tab
        end)

        function tab:Button(buttonConfig)
            local button = {}
            button.Title = buttonConfig.Title or "æŒ‰é’®"
            button.Desc = buttonConfig.Desc or ""
            button.Locked = buttonConfig.Locked or false
            button.Callback = buttonConfig.Callback or function() end

            local buttonFrame = Instance.new("Frame")
            buttonFrame.Size = UDim2.new(1, 0, 0, 70) -- å¢å¤§å°ºå¯¸ä¾¿äºè§¦æ‘¸
            buttonFrame.BackgroundTransparency = 1
            buttonFrame.Parent = tabContent

            local buttonElement = Instance.new("TextButton")
            buttonElement.Size = UDim2.new(1, -20, 0, 50) -- å¢å¤§æŒ‰é’®å°ºå¯¸
            buttonElement.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(50, 50, 50) or Color3.fromRGB(170, 170, 170)
            buttonElement.BackgroundTransparency = 0.5
            buttonElement.Text = button.Title
            buttonElement.TextColor3 = Color3.fromRGB(255, 255, 255)
            buttonElement.TextSize = 16 -- å¢å¤§æ–‡å­—
            buttonElement.Font = Enum.Font.Gotham
            applyCorner(buttonElement, 6)
            buttonElement.Parent = buttonFrame

            local descLabel = Instance.new("TextLabel")
            descLabel.Size = UDim2.new(1, -20, 0, 20)
            descLabel.Position = UDim2.new(0, 10, 0, 50)
            descLabel.BackgroundTransparency = 1
            descLabel.Text = button.Desc
            descLabel.TextColor3 = window.Theme == "Dark" and Color3.fromRGB(180, 180, 180) or Color3.fromRGB(100, 100, 100)
            descLabel.TextSize = 12
            descLabel.Font = Enum.Font.Gotham
            descLabel.TextWrapped = true
            descLabel.Parent = buttonFrame

            buttonElement.InputBegan:Connect(function(input)
                if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not button.Locked then
                    TweenService:Create(buttonElement, TweenInfo.new(0.1, Enum.EasingStyle.Sine), {
                        BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(80, 80, 80) or Color3.fromRGB(140, 140, 140),
                        BackgroundTransparency = 0.3
                    }):Play()
                end
            end)

            buttonElement.InputEnded:Connect(function(input)
                if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
                    if not button.Locked then
                        TweenService:Create(buttonElement, TweenInfo.new(0.1, Enum.EasingStyle.Sine), {
                            BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(50, 50, 50) or Color3.fromRGB(170, 170, 170),
                            BackgroundTransparency = 0.5
                        }):Play()
                        button.Callback()
                    else
                        self:Notify({
                            Title = "é”™è¯¯",
                            Content = "æ­¤æŒ‰é’®å·²é”å®šï¼",
                            Duration = 3
                        })
                    end
                end
            end)

            return button
        end

        function tab:Toggle(toggleConfig)
            local toggle = {}
            toggle.Title = toggleConfig.Title or "å¼€å…³"
            toggle.Desc = toggleConfig.Desc or ""
            toggle.Locked = toggleConfig.Locked or false
            toggle.State = toggleConfig.Default or false
            toggle.Callback = toggleConfig.Callback or function(state) end

            local toggleFrame = Instance.new("Frame")
            toggleFrame.Size = UDim2.new(1, 0, 0, 70) -- å¢å¤§å°ºå¯¸
            toggleFrame.BackgroundTransparency = 1
            toggleFrame.Parent = tabContent

            local toggleButton = Instance.new("TextButton")
            toggleButton.Size = UDim2.new(1, -20, 0, 50) -- å¢å¤§æŒ‰é’®å°ºå¯¸
            toggleButton.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(50, 50, 50) or Color3.fromRGB(170, 170, 170)
            toggleButton.BackgroundTransparency = 0.5
            toggleButton.Text = toggle.Title
            toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            toggleButton.TextSize = 16 -- å¢å¤§æ–‡å­—
            toggleButton.Font = Enum.Font.Gotham
            applyCorner(toggleButton, 6)
            toggleButton.Parent = toggleFrame

            local toggleIndicator = Instance.new("Frame")
            toggleIndicator.Size = UDim2.new(0, 40, 0, 30) -- å¢å¤§æŒ‡ç¤ºå™¨
            toggleIndicator.Position = toggle.State and UDim2.new(1, -50, 0.5, -15) or UDim2.new(1, -90, 0.5, -15)
            toggleIndicator.BackgroundColor3 = toggle.State and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
            applyCorner(toggleIndicator, 15)
            toggleIndicator.Parent = toggleButton

            local descLabel = Instance.new("TextLabel")
            descLabel.Size = UDim2.new(1, -20, 0, 20)
            descLabel.Position = UDim2.new(0, 10, 0, 50)
            descLabel.BackgroundTransparency = 1
            descLabel.Text = toggle.Desc
            descLabel.TextColor3 = window.Theme == "Dark" and Color3.fromRGB(180, 180, 180) or Color3.fromRGB(100, 100, 100)
            descLabel.TextSize = 12
            descLabel.Font = Enum.Font.Gotham
            descLabel.TextWrapped = true
            descLabel.Parent = toggleFrame

            toggleButton.InputBegan:Connect(function(input)
                if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not toggle.Locked then
                    toggle.State = not toggle.State
                    TweenService:Create(toggleIndicator, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                        BackgroundColor3 = toggle.State and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0),
                        Position = toggle.State and UDim2.new(1, -50, 0.5, -15) or UDim2.new(1, -90, 0.5, -15)
                    }):Play()
                    toggle.Callback(toggle.State)
                end
            end)

            toggleButton.InputEnded:Connect(function(input)
                if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and toggle.Locked then
                    self:Notify({
                        Title = "é”™è¯¯",
                        Content = "æ­¤å¼€å…³å·²é”å®šï¼",
                        Duration = 3
                    })
                end
            end)

            return toggle
        end

        function tab:Slider(sliderConfig)
            local slider = {}
            slider.Title = sliderConfig.Title or "æ»‘å—"
            slider.Min = sliderConfig.Min or 0
            slider.Max = sliderConfig.Max or 100
            slider.Default = sliderConfig.Default or 50
            slider.Step = sliderConfig.Step or 1
            slider.Callback = sliderConfig.Callback or function(value) end

            local sliderFrame = Instance.new("Frame")
            sliderFrame.Size = UDim2.new(1, 0, 0, 80) -- å¢å¤§å°ºå¯¸
            sliderFrame.BackgroundTransparency = 1
            sliderFrame.Parent = tabContent

            local titleLabel = Instance.new("TextLabel")
            titleLabel.Size = UDim2.new(1, -20, 0, 20)
            titleLabel.BackgroundTransparency = 1
            titleLabel.Text = slider.Title
            titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            titleLabel.TextSize = 16
            titleLabel.Font = Enum.Font.Gotham
            titleLabel.Parent = sliderFrame

            local sliderBar = Instance.new("Frame")
            sliderBar.Size = UDim2.new(1, -20, 0, 20) -- å¢å¤§æ»‘å—é«˜åº¦
            sliderBar.Position = UDim2.new(0, 10, 0, 30)
            sliderBar.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(60, 60, 60) or Color3.fromRGB(180, 180, 180)
            sliderBar.BackgroundTransparency = 0.5
            applyCorner(sliderBar, 10)
            sliderBar.Parent = sliderFrame

            local sliderFill = Instance.new("Frame")
            sliderFill.Size = UDim2.new(0, 0, 1, 0)
            sliderFill.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(0, 200, 0)
            applyCorner(sliderFill, 10)
            sliderFill.Parent = sliderBar

            local sliderKnob = Instance.new("Frame")
            sliderKnob.Size = UDim2.new(0, 30, 0, 30) -- å¢å¤§æ—‹é’®
            sliderKnob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            applyCorner(sliderKnob, 15)
            sliderKnob.Parent = sliderBar

            local valueLabel = Instance.new("TextLabel")
            valueLabel.Size = UDim2.new(0, 60, 0, 20)
            valueLabel.Position = UDim2.new(1, -70, 0, 30)
            valueLabel.BackgroundTransparency = 1
            valueLabel.Text = tostring(slider.Default)
            valueLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            valueLabel.TextSize = 14
            valueLabel.Font = Enum.Font.Gotham
            valueLabel.Parent = sliderFrame

            local function updateSlider(value)
                local percentage = (value - slider.Min) / (slider.Max - slider.Min)
                local barWidth = sliderBar.AbsoluteSize.X
                sliderFill.Size = UDim2.new(0, percentage * barWidth, 1, 0)
                sliderKnob.Position = UDim2.new(percentage, -15, 0.5, -15)
                valueLabel.Text = tostring(math.floor(value))
                slider.Callback(value)
            end

            updateSlider(slider.Default)

            local dragging = false
            sliderKnob.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = true
                    local startPos = UserInputService:GetMouseLocation().X
                    local startValue = slider.Default
                    local connection = UserInputService.InputChanged:Connect(function()
                        if dragging then
                            local delta = (UserInputService:GetMouseLocation().X - startPos) / sliderBar.AbsoluteSize.X * (slider.Max - slider.Min)
                            local newValue = math.clamp(startValue + delta, slider.Min, slider.Max)
                            newValue = math.floor(newValue / slider.Step) * slider.Step
                            updateSlider(newValue)
                        end
                    end)
                    sliderKnob.InputEnded:Connect(function()
                        dragging = false
                        connection:Disconnect()
                    end)
                end
            end)

            return slider
        end

        function tab:TextBox(textBoxConfig)
            local textBox = {}
            textBox.Title = textBoxConfig.Title or "è¾“å…¥æ¡†"
            textBox.Placeholder = textBoxConfig.Placeholder or "è¾“å…¥å†…å®¹..."
            textBox.Callback = textBoxConfig.Callback or function(text) end

            local textBoxFrame = Instance.new("Frame")
            textBoxFrame.Size = UDim2.new(1, 0, 0, 80) -- å¢å¤§å°ºå¯¸
            textBoxFrame.BackgroundTransparency = 1
            textBoxFrame.Parent = tabContent

            local titleLabel = Instance.new("TextLabel")
            titleLabel.Size = UDim2.new(1, -20, 0, 20)
            titleLabel.BackgroundTransparency = 1
            titleLabel.Text = textBox.Title
            titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            titleLabel.TextSize = 16
            titleLabel.Font = Enum.Font.Gotham
            titleLabel.Parent = textBoxFrame

            local textBoxElement = Instance.new("TextBox")
            textBoxElement.Size = UDim2.new(1, -20, 0, 40) -- å¢å¤§è¾“å…¥æ¡†
            textBoxElement.Position = UDim2.new(0, 10, 0, 30)
            textBoxElement.BackgroundColor3 = window.Theme == "Dark" and Color3.fromRGB(50, 50, 50) or Color3.fromRGB(170, 170, 170)
            textBoxElement.BackgroundTransparency = 0.5
            textBoxElement.Text = ""
            textBoxElement.PlaceholderText = textBox.Placeholder
            textBoxElement.TextColor3 = Color3.fromRGB(255, 255, 255)
            textBoxElement.TextSize = 16
            textBoxElement.Font = Enum.Font.Gotham
            applyCorner(textBoxElement, 6)
            textBoxElement.Parent = textBoxFrame

            textBoxElement.FocusLost:Connect(function(enterPressed)
                if enterPressed then
                    textBox.Callback(textBoxElement.Text)
                end
            end)

            return textBox
        end

        tab.Button = tabButton
        tab.Content = tabContent
        table.insert(window.Tabs, tab)
        if tab.Default then
            window.CurrentTab = tab
            TweenService:Create(tabButton, TweenInfo.new(0.3), {BackgroundTransparency = 0.2}):Play()
        end
        return tab
    end

    setmetatable(window, { __index = CustomUILibrary })
    return window
end

return CustomUILibrary
